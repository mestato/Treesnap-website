webpackJsonp([8],{"0dG/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=h(n("GiK3")),o=h(n("7610")),s=h(n("R3sX")),l=h(n("y1vT")),c=h(n("z+gd")),u=h(n("KSGD"));function h(e){return e&&e.__esModule?e:{default:e}}var f=["fullscreenchange","MSFullscreenChange","mozfullscreenchange","webkitfullscreenchange"],p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e));return n.slideToIndex=function(e,t){var a=n.state,r=a.currentIndex;if(!a.isTransitioning){t&&n._intervalId&&(n.pause(!1),n.play(!1));var i=n.props.items.length-1,o=e;e<0?o=i:e>i&&(o=0),n.setState({previousIndex:r,currentIndex:o,isTransitioning:o!==r,offsetPercentage:0,style:{transition:"all "+n.props.slideDuration+"ms ease-out"}},n._onSliding)}},n._onSliding=function(){var e=n.state.isTransitioning;n._transitionTimer=window.setTimeout(function(){e&&n.setState({isTransitioning:!e})},n.props.slideDuration+50)},n._handleScreenChange=function(){var e=document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;n.props.onScreenChange&&n.props.onScreenChange(e),n.setState({isFullscreen:!!e})},n._toggleFullScreen=function(){n.state.isFullscreen?n.exitFullScreen():n.fullScreen()},n._togglePlay=function(){n._intervalId?n.pause():n.play()},n._initGalleryResizing=function(e){e&&(n._imageGallerySlideWrapper=e,n.resizeObserver=new c.default(n._createResizeObserver),n.resizeObserver.observe(e))},n._createResizeObserver=(0,l.default)(function(e){e.forEach(function(){n._handleResize()})},300),n._handleResize=function(){var e=n.state.currentIndex;n._imageGallery&&n.setState({galleryWidth:n._imageGallery.offsetWidth}),n._imageGallerySlideWrapper&&n.setState({gallerySlideWrapperHeight:n._imageGallerySlideWrapper.offsetHeight}),n._thumbnailsWrapper&&(n._isThumbnailHorizontal()?n.setState({thumbnailsWrapperHeight:n._thumbnailsWrapper.offsetHeight}):n.setState({thumbnailsWrapperWidth:n._thumbnailsWrapper.offsetWidth})),n._setThumbsTranslate(-n._getThumbsTranslate(e))},n._handleKeyDown=function(e){switch(parseInt(e.keyCode||e.which||0)){case 37:n._canSlideLeft()&&!n._intervalId&&n._slideLeft();break;case 39:n._canSlideRight()&&!n._intervalId&&n._slideRight();break;case 27:n.state.isFullscreen&&!n.props.useBrowserFullscreen&&n.exitFullScreen()}},n._handleImageError=function(e){n.props.defaultImage&&-1===e.target.src.indexOf(n.props.defaultImage)&&(e.target.src=n.props.defaultImage)},n._handleOnSwiped=function(e,t,a,r){var i=n.state,o=i.scrollingUpDown,s=i.scrollingLeftRight;if(o&&n.setState({scrollingUpDown:!1}),s&&n.setState({scrollingLeftRight:!1}),!o){var l=t>0?1:-1;n._handleOnSwipedTo(l,r)}},n._handleSwiping=function(e,t,a,r){var i=n.state,o=i.galleryWidth,s=i.isTransitioning,l=i.scrollingUpDown,c=n.props.swipingTransitionDuration;if(n._setScrollDirection(t,a),s||l)n.setState({offsetPercentage:0});else{var u=t<0?1:-1,h=r/o*100;Math.abs(h)>=100&&(h=100);var f={transition:"transform "+c+"ms ease-out"};n.setState({offsetPercentage:u*h,style:f})}},n._slideLeft=function(e){n.slideToIndex(n.state.currentIndex-1,e)},n._slideRight=function(e){n.slideToIndex(n.state.currentIndex+1,e)},n._renderItem=function(e){var t=n.props.onImageError||n._handleImageError;return i.default.createElement("div",{className:"image-gallery-image"},e.imageSet?i.default.createElement("picture",{onLoad:n.props.onImageLoad,onError:t},e.imageSet.map(function(e,t){return i.default.createElement("source",{key:t,media:e.media,srcSet:e.srcSet})}),i.default.createElement("img",{alt:e.originalAlt,src:e.original})):i.default.createElement("img",{src:e.original,alt:e.originalAlt,srcSet:e.srcSet,sizes:e.sizes,title:e.originalTitle,onLoad:n.props.onImageLoad,onError:t}),e.description&&i.default.createElement("span",{className:"image-gallery-description"},e.description))},n._renderThumbInner=function(e){var t=n.props.onThumbnailError||n._handleImageError;return i.default.createElement("div",null,i.default.createElement("img",{src:e.thumbnail,alt:e.thumbnailAlt,title:e.thumbnailTitle,onError:t}),i.default.createElement("div",{className:"image-gallery-thumbnail-label"},e.thumbnailLabel))},n._onThumbnailClick=function(e,t){n.slideToIndex(t,e),n.props.onThumbnailClick&&n.props.onThumbnailClick(e,t)},n.state={currentIndex:e.startIndex,thumbsTranslate:0,offsetPercentage:0,galleryWidth:0,thumbnailsWrapperWidth:0,thumbnailsWrapperHeight:0,isFullscreen:!1,isPlaying:!1},n._unthrottledSlideToIndex=n.slideToIndex,n.slideToIndex=(0,s.default)(n._unthrottledSlideToIndex,e.slideDuration,{trailing:!1}),e.lazyLoad&&(n._lazyLoaded=[]),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){this.props.disableArrowKeys!==e.disableArrowKeys&&(e.disableArrowKeys?window.removeEventListener("keydown",this._handleKeyDown):window.addEventListener("keydown",this._handleKeyDown)),!e.lazyLoad||this.props.lazyLoad&&this.props.items===e.items||(this._lazyLoaded=[]),this.state.currentIndex>=e.items.length&&this.slideToIndex(0)}},{key:"componentDidUpdate",value:function(e,t){e.items.length!==this.props.items.length&&this._handleResize(),t.currentIndex!==this.state.currentIndex&&(this.props.onSlide&&this.props.onSlide(this.state.currentIndex),this._updateThumbnailTranslate(t.currentIndex)),e.slideDuration!==this.props.slideDuration&&(this.slideToIndex=(0,s.default)(this._unthrottledSlideToIndex,this.props.slideDuration,{trailing:!1}))}},{key:"componentDidMount",value:function(){this.props.autoPlay&&this.play(),this.props.disableArrowKeys||window.addEventListener("keydown",this._handleKeyDown),this._onScreenChangeEvent()}},{key:"componentWillUnmount",value:function(){this.props.disableArrowKeys||window.removeEventListener("keydown",this._handleKeyDown),this._offScreenChangeEvent(),this._intervalId&&(window.clearInterval(this._intervalId),this._intervalId=null),this.resizeObserver&&this._imageGallerySlideWrapper&&this.resizeObserver.unobserve(this._imageGallerySlideWrapper),this._transitionTimer&&window.clearTimeout(this._transitionTimer)}},{key:"play",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]||arguments[0];if(!this._intervalId){var n=this.props,a=n.slideInterval,r=n.slideDuration;this.setState({isPlaying:!0}),this._intervalId=window.setInterval(function(){e.state.hovering||(e.props.infinite||e._canSlideRight()?e.slideToIndex(e.state.currentIndex+1):e.pause())},Math.max(a,r)),this.props.onPlay&&t&&this.props.onPlay(this.state.currentIndex)}}},{key:"pause",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];this._intervalId&&(window.clearInterval(this._intervalId),this._intervalId=null,this.setState({isPlaying:!1}),this.props.onPause&&e&&this.props.onPause(this.state.currentIndex))}},{key:"setModalFullscreen",value:function(e){this.setState({modalFullscreen:e}),this.props.onScreenChange&&this.props.onScreenChange(e)}},{key:"fullScreen",value:function(){var e=this._imageGallery;this.props.useBrowserFullscreen?e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():this.setModalFullscreen(!0):this.setModalFullscreen(!0),this.setState({isFullscreen:!0})}},{key:"exitFullScreen",value:function(){this.state.isFullscreen&&(this.props.useBrowserFullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this.setModalFullscreen(!1):this.setModalFullscreen(!1),this.setState({isFullscreen:!1}))}},{key:"getCurrentIndex",value:function(){return this.state.currentIndex}},{key:"_onScreenChangeEvent",value:function(){var e=this;f.map(function(t){document.addEventListener(t,e._handleScreenChange)})}},{key:"_offScreenChangeEvent",value:function(){var e=this;f.map(function(t){document.removeEventListener(t,e._handleScreenChange)})}},{key:"_isThumbnailHorizontal",value:function(){var e=this.props.thumbnailPosition;return"left"===e||"right"===e}},{key:"_setScrollDirection",value:function(e,t){var n=this.state,a=n.scrollingUpDown,r=n.scrollingLeftRight,i=Math.abs(e);Math.abs(t)>i&&!a&&!r?this.setState({scrollingUpDown:!0}):r||a||this.setState({scrollingLeftRight:!0})}},{key:"_handleOnSwipedTo",value:function(e,t){var n=this.state,a=n.currentIndex,r=n.isTransitioning,i=a;!this._sufficientSwipeOffset()&&!t||r||(i+=e),e<0?this._canSlideLeft()||(i=a):this._canSlideRight()||(i=a),this._unthrottledSlideToIndex(i)}},{key:"_sufficientSwipeOffset",value:function(){return Math.abs(this.state.offsetPercentage)>this.props.swipeThreshold}},{key:"_canNavigate",value:function(){return this.props.items.length>=2}},{key:"_canSlideLeft",value:function(){return this.props.infinite||this.state.currentIndex>0}},{key:"_canSlideRight",value:function(){return this.props.infinite||this.state.currentIndex<this.props.items.length-1}},{key:"_updateThumbnailTranslate",value:function(e){var t=this.state,n=t.thumbsTranslate,a=t.currentIndex;if(0===this.state.currentIndex)this._setThumbsTranslate(0);else{var r=Math.abs(e-a),i=this._getThumbsTranslate(r);i>0&&(e<a?this._setThumbsTranslate(n-i):e>a&&this._setThumbsTranslate(n+i))}}},{key:"_setThumbsTranslate",value:function(e){this.setState({thumbsTranslate:e})}},{key:"_getThumbsTranslate",value:function(e){if(this.props.disableThumbnailScroll)return 0;var t=this.state,n=t.thumbnailsWrapperWidth,a=t.thumbnailsWrapperHeight,r=void 0;if(this._thumbnails){if(this._isThumbnailHorizontal()){if(this._thumbnails.scrollHeight<=a)return 0;r=this._thumbnails.scrollHeight-a}else{if(this._thumbnails.scrollWidth<=n||n<=0)return 0;r=this._thumbnails.scrollWidth-n}return e*(r/(this._thumbnails.children.length-1))}}},{key:"_getAlignmentClassName",value:function(e){var t=this.state.currentIndex,n="";switch(e){case t-1:n=" left";break;case t:n=" center";break;case t+1:n=" right"}return this.props.items.length>=3&&this.props.infinite&&(0===e&&t===this.props.items.length-1?n=" right":e===this.props.items.length-1&&0===t&&(n=" left")),n}},{key:"_isGoingFromFirstToLast",value:function(){var e=this.state,t=e.currentIndex,n=e.previousIndex,a=this.props.items.length-1;return 0===n&&t===a}},{key:"_isGoingFromLastToFirst",value:function(){var e=this.state,t=e.currentIndex;return e.previousIndex===this.props.items.length-1&&0===t}},{key:"_getTranslateXForTwoSlide",value:function(e){var t=this.state,n=t.currentIndex,a=t.offsetPercentage,r=t.previousIndex,i=-100*n+100*e+a;return a>0?this.direction="left":a<0&&(this.direction="right"),0===n&&1===e&&a>0?i=-100+a:1===n&&0===e&&a<0&&(i=100+a),n!==r?0===r&&0===e&&0===a&&"left"===this.direction?i=100:1===r&&1===e&&0===a&&"right"===this.direction&&(i=-100):0===n&&1===e&&0===a&&"left"===this.direction?i=-100:1===n&&0===e&&0===a&&"right"===this.direction&&(i=100),i}},{key:"_getThumbnailBarHeight",value:function(){return this._isThumbnailHorizontal()?{height:this.state.gallerySlideWrapperHeight}:{}}},{key:"_shouldPushSlideOnInfiniteMode",value:function(e){return!this._slideIsTransitioning(e)||this._ignoreIsTransitioning()&&!this._isFirstOrLastSlide(e)}},{key:"_slideIsTransitioning",value:function(e){var t=this.state,n=t.isTransitioning,a=t.previousIndex,r=t.currentIndex;return n&&!(e===a||e===r)}},{key:"_isFirstOrLastSlide",value:function(e){return e===this.props.items.length-1||0===e}},{key:"_ignoreIsTransitioning",value:function(){var e=this.state,t=e.previousIndex,n=e.currentIndex,a=this.props.items.length-1;return Math.abs(t-n)>1&&!(0===t&&n===a)&&!(t===a&&0===n)}},{key:"_getSlideStyle",value:function(e){var t=this.state,n=t.currentIndex,a=t.offsetPercentage,r=this.props,i=r.infinite,o=r.items,s=r.useTranslate3D,l=-100*n,c=o.length-1,u=l+100*e+a;i&&o.length>2&&(0===n&&e===c?u=-100+a:n===c&&0===e&&(u=100+a)),i&&2===o.length&&(u=this._getTranslateXForTwoSlide(e));var h="translate("+u+"%, 0)";return s&&(h="translate3d("+u+"%, 0, 0)"),{WebkitTransform:h,MozTransform:h,msTransform:h,OTransform:h,transform:h}}},{key:"_getThumbnailStyle",value:function(){var e=void 0,t=this.props.useTranslate3D;return this._isThumbnailHorizontal()?(e="translate(0, "+this.state.thumbsTranslate+"px)",t&&(e="translate3d(0, "+this.state.thumbsTranslate+"px, 0)")):(e="translate("+this.state.thumbsTranslate+"px, 0)",t&&(e="translate3d("+this.state.thumbsTranslate+"px, 0, 0)")),{WebkitTransform:e,MozTransform:e,msTransform:e,OTransform:e,transform:e}}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentIndex,r=t.isFullscreen,s=t.modalFullscreen,l=t.isPlaying,c=t.scrollingLeftRight,u=this.props,h=u.infinite,f=u.preventDefaultTouchmoveEvent,p=this._getThumbnailStyle(),d=this.props.thumbnailPosition,m=this._slideLeft,v=this._slideRight,b=[],g=[],y=[];this.props.items.forEach(function(t,r){var o=e._getAlignmentClassName(r),s=t.originalClass?" "+t.originalClass:"",l=t.thumbnailClass?" "+t.thumbnailClass:"",c=t.renderItem||e.props.renderItem||e._renderItem,u=t.renderThumbInner||e.props.renderThumbInner||e._renderThumbInner,f=!e.props.lazyLoad||o||e._lazyLoaded[r];f&&e.props.lazyLoad&&(e._lazyLoaded[r]=!0);var p=e._getSlideStyle(r),d=i.default.createElement("div",{key:r,className:"image-gallery-slide"+o+s,style:a(p,e.state.style),onClick:e.props.onClick,onTouchMove:e.props.onTouchMove,onTouchEnd:e.props.onTouchEnd,onTouchStart:e.props.onTouchStart,onMouseOver:e.props.onMouseOver,onMouseLeave:e.props.onMouseLeave,role:e.props.onClick&&"button"},f?c(t):i.default.createElement("div",{style:{height:"100%"}}));if(h?e._shouldPushSlideOnInfiniteMode(r)&&b.push(d):b.push(d),e.props.showThumbnails&&g.push(i.default.createElement("a",{key:r,role:"button","aria-pressed":n===r?"true":"false","aria-label":"Go to Slide "+(r+1),className:"image-gallery-thumbnail"+(n===r?" active":"")+l,onClick:function(t){return e._onThumbnailClick(t,r)}},u(t))),e.props.showBullets){y.push(i.default.createElement("button",{key:r,type:"button",className:["image-gallery-bullet",n===r?"active":"",t.bulletClass||""].join(" "),onClick:function(a){return t.bulletOnClick&&t.bulletOnClick({item:t,itemIndex:r,currentIndex:n}),e.slideToIndex.call(e,r,a)},"aria-pressed":n===r?"true":"false","aria-label":"Go to Slide "+(r+1)}))}});var w=i.default.createElement("div",{ref:this._initGalleryResizing,className:"image-gallery-slide-wrapper "+d},this.props.renderCustomControls&&this.props.renderCustomControls(),this.props.showFullscreenButton&&this.props.renderFullscreenButton(this._toggleFullScreen,r),this.props.showPlayButton&&this.props.renderPlayPauseButton(this._togglePlay,l),this._canNavigate()?[this.props.showNav&&i.default.createElement("span",{key:"navigation"},this.props.renderLeftNav(m,!this._canSlideLeft()),this.props.renderRightNav(v,!this._canSlideRight())),i.default.createElement(o.default,{className:"image-gallery-swipe",disabled:this.props.disableSwipe,key:"swipeable",delta:0,flickThreshold:this.props.flickThreshold,onSwiping:this._handleSwiping,onSwiped:this._handleOnSwiped,stopPropagation:this.props.stopPropagation,preventDefaultTouchmoveEvent:f||c},i.default.createElement("div",{className:"image-gallery-slides"},b))]:i.default.createElement("div",{className:"image-gallery-slides"},b),this.props.showBullets&&i.default.createElement("div",{className:"image-gallery-bullets"},i.default.createElement("div",{className:"image-gallery-bullets-container",role:"navigation","aria-label":"Bullet Navigation"},y)),this.props.showIndex&&i.default.createElement("div",{className:"image-gallery-index"},i.default.createElement("span",{className:"image-gallery-index-current"},this.state.currentIndex+1),i.default.createElement("span",{className:"image-gallery-index-separator"},this.props.indexSeparator),i.default.createElement("span",{className:"image-gallery-index-total"},this.props.items.length))),_=["image-gallery",this.props.additionalClass,s?"fullscreen-modal":""].filter(function(e){return"string"==typeof e}).join(" ");return i.default.createElement("div",{ref:function(t){return e._imageGallery=t},className:_,"aria-live":"polite"},i.default.createElement("div",{className:"image-gallery-content"+(r?" fullscreen":"")},("bottom"===d||"right"===d)&&w,this.props.showThumbnails&&i.default.createElement("div",{className:"image-gallery-thumbnails-wrapper "+d,style:this._getThumbnailBarHeight()},i.default.createElement("div",{className:"image-gallery-thumbnails",ref:function(t){return e._thumbnailsWrapper=t}},i.default.createElement("div",{ref:function(t){return e._thumbnails=t},className:"image-gallery-thumbnails-container",style:p,"aria-label":"Thumbnail Navigation"},g))),("top"===d||"left"===d)&&w))}}]),t}();p.propTypes={flickThreshold:u.default.number,items:u.default.array.isRequired,showNav:u.default.bool,autoPlay:u.default.bool,lazyLoad:u.default.bool,infinite:u.default.bool,showIndex:u.default.bool,showBullets:u.default.bool,showThumbnails:u.default.bool,showPlayButton:u.default.bool,showFullscreenButton:u.default.bool,disableThumbnailScroll:u.default.bool,disableArrowKeys:u.default.bool,disableSwipe:u.default.bool,useBrowserFullscreen:u.default.bool,preventDefaultTouchmoveEvent:u.default.bool,defaultImage:u.default.string,indexSeparator:u.default.string,thumbnailPosition:u.default.string,startIndex:u.default.number,slideDuration:u.default.number,slideInterval:u.default.number,swipeThreshold:u.default.number,swipingTransitionDuration:u.default.number,onSlide:u.default.func,onScreenChange:u.default.func,onPause:u.default.func,onPlay:u.default.func,onClick:u.default.func,onImageLoad:u.default.func,onImageError:u.default.func,onTouchMove:u.default.func,onTouchEnd:u.default.func,onTouchStart:u.default.func,onMouseOver:u.default.func,onMouseLeave:u.default.func,onThumbnailError:u.default.func,onThumbnailClick:u.default.func,renderCustomControls:u.default.func,renderLeftNav:u.default.func,renderRightNav:u.default.func,renderPlayPauseButton:u.default.func,renderFullscreenButton:u.default.func,renderItem:u.default.func,stopPropagation:u.default.bool,additionalClass:u.default.string,useTranslate3D:u.default.bool},p.defaultProps={items:[],showNav:!0,autoPlay:!1,lazyLoad:!1,infinite:!0,showIndex:!1,showBullets:!1,showThumbnails:!0,showPlayButton:!0,showFullscreenButton:!0,disableThumbnailScroll:!1,disableArrowKeys:!1,disableSwipe:!1,useTranslate3D:!0,useBrowserFullscreen:!0,preventDefaultTouchmoveEvent:!1,flickThreshold:.4,stopPropagation:!1,indexSeparator:" / ",thumbnailPosition:"bottom",startIndex:0,slideDuration:450,swipingTransitionDuration:0,slideInterval:3e3,swipeThreshold:30,renderLeftNav:function(e,t){return i.default.createElement("button",{type:"button",className:"image-gallery-left-nav",disabled:t,onClick:e,"aria-label":"Previous Slide"})},renderRightNav:function(e,t){return i.default.createElement("button",{type:"button",className:"image-gallery-right-nav",disabled:t,onClick:e,"aria-label":"Next Slide"})},renderPlayPauseButton:function(e,t){return i.default.createElement("button",{type:"button",className:"image-gallery-play-button"+(t?" active":""),onClick:e,"aria-label":"Play or Pause Slideshow"})},renderFullscreenButton:function(e,t){return i.default.createElement("button",{type:"button",className:"image-gallery-fullscreen-button"+(t?" active":""),onClick:e,"aria-label":"Open Fullscreen"})}},t.default=p},"5L7H":function(e,t,n){"use strict";var a=n("GiK3"),r=n.n(a),i=n("KSGD"),o=n.n(i),s=n("saAw"),l=n("OE/d"),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1,collection_id:0,label:"",errors:{label:[],collection_id:[]}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),c(t,[{key:"submit",value:function(e){var t=this;if(e.preventDefault(),this.validate()){this.setState({loading:!0});var n=parseInt(this.state.collection_id);axios.post("/web/collection/attach",{observation_id:this.props.observationId,collection_id:0!==n?n:"",label:this.state.label}).then(function(e){t.setState({label:"",collection_id:0,errors:{label:[],collection_id:[]},loading:!1}),t.props.onSubmit(e.data.data)}).catch(function(e){var n=e.response;if(n&&422===n.status){var a=n.data;t.setState({errors:{label:a.label||[],collection_id:a.collection_id||[]},loading:!1})}else console.log(e)})}}},{key:"validate",value:function(){var e=this.state.label,t=this.state.collection_id;return""!==e.trim()||0!==t||(this.setState({errors:{label:["Please select an existing collection or type a new collection label."],collection_id:[]}}),!1)}},{key:"render",value:function(){var e=this;return l.a.authenticated()?r.a.createElement("form",{action:"#",method:"POST",onSubmit:this.submit.bind(this)},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Collection Name"),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"select"+(this.state.errors.collection_id.length>0?" is-danger":"")},r.a.createElement("select",{value:this.state.collection_id,onChange:function(t){var n=t.target;return e.setState({collection_id:n.value})}},r.a.createElement("option",{value:"0"},"[Select Collection]"),this.props.collections.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}))),this.state.errors.collection_id.map(function(e,t){return r.a.createElement("p",{className:"help is-danger",key:t},e)}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Or Create New Collection"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"text",className:"input"+(this.state.errors.label.length>0?" is-danger":""),onChange:function(t){var n=t.target;return e.setState({label:n.value})},value:this.state.label,placeholder:"Type new collection label",readOnly:0!==parseInt(this.state.collection_id),disabled:0!==parseInt(this.state.collection_id)}),this.state.errors.label.map(function(e,t){return r.a.createElement("p",{className:"help is-danger",key:t},e)})),r.a.createElement("p",{className:"help"},"The selected observation will be automatically added to the newly created collection.")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-primary"},"Add Observation"))),r.a.createElement(s.a,{visible:this.state.loading})):r.a.createElement("div",{className:"content"},r.a.createElement("p",null,"You must be logged in to add this observation to a collection."),r.a.createElement("p",null,"Please ",r.a.createElement("a",{href:"/login"},"login")," or ",r.a.createElement("a",{href:"/register"},"create an account")," first."))}}]),t}();t.a=u,u.propTypes={observationId:o.a.number.isRequired,collections:o.a.array,onSubmit:o.a.func},u.defaultProps={collections:[],onSubmit:function(){}}},"5zKI":function(e,t,n){"use strict";var a=n("GiK3"),r=n.n(a),i=n("O27J"),o=n.n(i),s=n("KSGD"),l=n.n(s),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={show:!1,hiding:!1,marginTop:window.scrollY>70?-40:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),c(t,[{key:"componentWillMount",value:function(){var e=this;this.timer=setTimeout(function(){e.hide()},5e3)}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({show:!0})},100),window.addEventListener("scroll",this.handleWindowScroll.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleWindowScroll.bind(this))}},{key:"handleWindowScroll",value:function(){var e=window.scrollY>70?-40:0;this.setState({marginTop:e})}},{key:"hide",value:function(){this.setState({hiding:!0}),clearTimeout(this.timer)}},{key:"render",value:function(){var e="";switch(this.props.type){case"success":case"danger":case"info":case"warning":e="is-"+this.props.type;break;default:e="is-success"}e+=this.state.show?" show":"",e+=this.state.hiding?" hiding":"";var t=this.state.marginTop;return r.a.createElement("div",{className:"notification push-notification "+e,style:{marginTop:t+"px"}},r.a.createElement("button",{type:"button",className:"delete",onClick:this.hide.bind(this)}),this.props.message)}}],[{key:"_remove",value:function(){this.stack&&this.stack.length>0&&document.body.removeChild(this.stack.shift())}},{key:"push",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=document.createElement("div");o.a.render(r.a.createElement(t,{message:e,type:n,container:a}),a),document.body.appendChild(a),this.stack.length>0&&this._remove(),this.stack.push(a)}}]),t}();t.a=u,u.propTypes={message:l.a.string.isRequired,type:l.a.string,container:l.a.object.isRequired},u.defaultProps={type:"success"},u.stack=[]},7610:function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};var r=n("GiK3"),i=n("KSGD"),o=n("qngo").default;function s(e,t){if(0===t)return e;var n=e.x,a=e.y,r=Math.PI/180*t;return{x:n*Math.cos(r)+a*Math.sin(r),y:a*Math.cos(r)-n*Math.sin(r)}}function l(e,t){var n=s(function(e){return"changedTouches"in e?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:{x:e.clientX,y:e.clientY}}(e),t.rotationAngle),a=n.x,r=n.y,i=t.x-a,o=t.y-r,l=Math.abs(i),c=Math.abs(o),u=Date.now()-t.start;return{deltaX:i,deltaY:o,absX:l,absY:c,velocity:Math.sqrt(l*l+c*c)/u}}var c=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,a));return r.swipeable={x:null,y:null,swiping:!1,start:0},r.eventStart=r.eventStart.bind(r),r.eventMove=r.eventMove.bind(r),r.eventEnd=r.eventEnd.bind(r),r.mouseDown=r.mouseDown.bind(r),r.mouseMove=r.mouseMove.bind(r),r.mouseUp=r.mouseUp.bind(r),r.cleanupMouseListeners=r.cleanupMouseListeners.bind(r),r.setupMouseListeners=r.setupMouseListeners.bind(r),r.elementRef=r.elementRef.bind(r),r.setupTouchmoveEvent=r.setupTouchmoveEvent.bind(r),r.cleanupTouchmoveEvent=r.cleanupTouchmoveEvent.bind(r),r.hasPassiveSupport=o.hasSupport,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.preventDefaultTouchmoveEvent&&this.setupTouchmoveEvent()},t.prototype.componentDidUpdate=function(e){e.disabled!==this.props.disabled&&(this.cleanupMouseListeners(),this.swipeable={x:null,y:null,swiping:!1,start:0}),e.preventDefaultTouchmoveEvent&&!this.props.preventDefaultTouchmoveEvent?this.cleanupTouchmoveEvent():!e.preventDefaultTouchmoveEvent&&this.props.preventDefaultTouchmoveEvent&&this.setupTouchmoveEvent()},t.prototype.componentWillUnmount=function(){this.cleanupMouseListeners()},t.prototype.setupTouchmoveEvent=function(){this.element&&this.hasPassiveSupport&&this.element.addEventListener("touchmove",this.eventMove,{passive:!1})},t.prototype.setupMouseListeners=function(){document.addEventListener("mousemove",this.mouseMove),document.addEventListener("mouseup",this.mouseUp)},t.prototype.cleanupTouchmoveEvent=function(){this.element&&this.hasPassiveSupport&&this.element.removeEventListener("touchmove",this.eventMove,{passive:!1})},t.prototype.cleanupMouseListeners=function(){document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp)},t.prototype.mouseDown=function(e){this.props.trackMouse&&"mousedown"===e.type&&("function"==typeof this.props.onMouseDown&&this.props.onMouseDown(e),this.setupMouseListeners(),this.eventStart(e))},t.prototype.mouseMove=function(e){this.eventMove(e)},t.prototype.mouseUp=function(e){this.cleanupMouseListeners(),this.eventEnd(e)},t.prototype.eventStart=function(e){if(!(e.touches&&e.touches.length>1)){var t=this.props.rotationAngle,n=s(function(e){return"touches"in e?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}(e),t),a=n.x,r=n.y;this.props.stopPropagation&&e.stopPropagation(),this.swipeable={start:Date.now(),x:a,y:r,swiping:!1,rotationAngle:t}}},t.prototype.eventMove=function(e){var t=this.props,n=t.stopPropagation,a=t.delta,r=t.onSwiping,i=t.onSwiped,o=t.onSwipingLeft,s=t.onSwipedLeft,c=t.onSwipingRight,u=t.onSwipedRight,h=t.onSwipingUp,f=t.onSwipedUp,p=t.onSwipingDown,d=t.onSwipedDown,m=t.preventDefaultTouchmoveEvent;if(this.swipeable.x&&this.swipeable.y&&!(e.touches&&e.touches.length>1)){var v=l(e,this.swipeable);if(!(v.absX<a&&v.absY<a)||this.swipeable.swiping){n&&e.stopPropagation(),r&&r(e,v.deltaX,v.deltaY,v.absX,v.absY,v.velocity);var b=!1;(r||i)&&(b=!0),v.absX>v.absY?v.deltaX>0?(o||s)&&(o&&o(e,v.absX),b=!0):(c||u)&&(c&&c(e,v.absX),b=!0):v.deltaY>0?(h||f)&&(h&&h(e,v.absY),b=!0):(p||d)&&(p&&p(e,v.absY),b=!0),this.swipeable.swiping=!0,b&&m&&e.preventDefault()}}},t.prototype.eventEnd=function(e){var t=this.props,n=t.stopPropagation,a=t.flickThreshold,r=t.onSwiped,i=t.onSwipedLeft,o=t.onSwipedRight,s=t.onSwipedUp,c=t.onSwipedDown,u=t.onTap;if(this.swipeable.swiping){var h=l(e,this.swipeable);n&&e.stopPropagation();var f=h.velocity>a;r&&r(e,h.deltaX,h.deltaY,f,h.velocity),h.absX>h.absY?h.deltaX>0?i&&i(e,h.deltaX,f):o&&o(e,h.deltaX,f):h.deltaY>0?s&&s(e,h.deltaY,f):c&&c(e,h.deltaY,f)}else u&&u(e);this.swipeable={x:null,y:null,swiping:!1,start:0}},t.prototype.elementRef=function(e){this.element=e,this.props.innerRef&&this.props.innerRef(e)},t.prototype.render=function(){var e=a({},this.props);return this.props.disabled||(e.onTouchStart=this.eventStart,this.props.preventDefaultTouchmoveEvent&&this.hasPassiveSupport||(e.onTouchMove=this.eventMove),e.onTouchEnd=this.eventEnd,e.onMouseDown=this.mouseDown),e.ref=this.elementRef,delete e.onSwiped,delete e.onSwiping,delete e.onSwipingUp,delete e.onSwipingRight,delete e.onSwipingDown,delete e.onSwipingLeft,delete e.onSwipedUp,delete e.onSwipedRight,delete e.onSwipedDown,delete e.onSwipedLeft,delete e.onTap,delete e.flickThreshold,delete e.delta,delete e.preventDefaultTouchmoveEvent,delete e.stopPropagation,delete e.nodeName,delete e.children,delete e.trackMouse,delete e.disabled,delete e.innerRef,delete e.rotationAngle,r.createElement(this.props.nodeName,e,this.props.children)},t}(r.Component);c.propTypes={onSwiped:i.func,onSwiping:i.func,onSwipingUp:i.func,onSwipingRight:i.func,onSwipingDown:i.func,onSwipingLeft:i.func,onSwipedUp:i.func,onSwipedRight:i.func,onSwipedDown:i.func,onSwipedLeft:i.func,onTap:i.func,flickThreshold:i.number,delta:i.number,preventDefaultTouchmoveEvent:i.bool,stopPropagation:i.bool,nodeName:i.string,trackMouse:i.bool,disabled:i.bool,innerRef:i.func,children:i.node,rotationAngle:i.number},c.defaultProps={flickThreshold:.6,delta:10,preventDefaultTouchmoveEvent:!1,stopPropagation:!1,nodeName:"div",disabled:!1,rotationAngle:0},e.exports=c},DakW:function(e,t,n){"use strict";var a=n("GiK3");n.n(a);var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return window.ga&&setTimeout(function(){return window.ga("send","pageview")},2500),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),t}();t.a=r},Hwqd:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"_flatten",value:function(e){return e.map(function(e){return parseInt(e.id)})}},{key:"_contains",value:function(e,t){return-1!==e.trim().toLowerCase().indexOf(t.trim())}}]),e}();t.a=r},IFrJ:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setPath()}return a(e,[{key:"setPath",value:function(){this.path=window.location.pathname,"/"!==this.path&&this.path.replace(/\/$/g,"")}},{key:"isActive",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is-active";return this.setPath(),t&&this.path===e?n:!t&&this.path.indexOf(e)>=0?n:null}},{key:"parseUrl",value:function(e){var t={};return(e=e.substr(1)).split("&").forEach(function(e){if(e){var n=(e=e.split("+").join(" ")).indexOf("="),a=n>-1?e.substr(0,n):e,r=n>-1?decodeURIComponent(e.substr(n+1)):"",i=a.indexOf("[");if(-1===i)t[decodeURIComponent(a)]=r;else{var o=a.indexOf("]",i),s=decodeURIComponent(a.substring(i+1,o));a=decodeURIComponent(a.substring(0,i)),t[a]||(t[a]=[]),s?t[a][s]=r:t[a].push(r)}}}),t}}]),e}();t.a=new r},LvfB:function(e,t,n){var a,r,i;r=[t],void 0===(i="function"==typeof(a=function(e){var t,n,a=window,r=document,i="mousemove",o="mouseup",s="mousedown",l="EventListener",c="add"+l,u="remove"+l,h=[],f=function(e,l){for(e=0;e<h.length;)(l=(l=h[e++]).container||l)[u](s,l.md,0),a[u](o,l.mu,0),a[u](i,l.mm,0);for(h=[].slice.call(r.getElementsByClassName("dragscroll")),e=0;e<h.length;)!function(e,l,u,h,f,p){(p=e.container||e)[c](s,p.md=function(t){e.hasAttribute("nochilddrag")&&r.elementFromPoint(t.pageX,t.pageY)!=p||(h=1,l=t.clientX,u=t.clientY,t.preventDefault())},0),a[c](o,p.mu=function(){h=0},0),a[c](i,p.mm=function(a){h&&((f=e.scroller||e).scrollLeft-=t=-l+(l=a.clientX),f.scrollTop-=n=-u+(u=a.clientY),e==r.body&&((f=r.documentElement).scrollLeft-=t,f.scrollTop-=n))},0)}(h[e++])};"complete"==r.readyState?f():a[c]("load",f,0),e.reset=f})?a.apply(t,r):a)||(e.exports=i)},NdNt:function(e,t,n){"use strict";var a=n("GiK3"),r=n("KSGD"),i=n.n(r),o=n("O27J"),s=n.n(o),l=new google.maps.InfoWindow,c=n("t4LX"),u=n("OE/d"),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.marker="",n.colors={"American Chestnut":"https://maps.google.com/mapfiles/ms/icons/green-dot.png",Ash:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png",Hemlock:"https://maps.google.com/mapfiles/ms/icons/red-dot.png","White Oak":"https://maps.google.com/mapfiles/ms/icons/yellow-dot.png",Other:"https://maps.google.com/mapfiles/ms/icons/purple-dot.png"},n.event=c.a.listen("mapClicked",function(){n.callout&&n.callout.close()}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),h(t,[{key:"componentWillMount",value:function(){this.marker=new google.maps.Marker({title:this.props.title,position:{lat:this.props.position.latitude,lng:this.props.position.longitude},map:this.props.maps}),this.callout=l,this.marker.setVisible(this.props.show),this.marker.addListener("click",this.openCallout.bind(this));var e=void 0;e=this.canSeeLocation()?this.colors[this.marker.title]||"https://maps.google.com/mapfiles/ms/icons/purple-dot.png":"/images/map/q-dot.png",this.marker.setIcon(e),this.props.onCreate(this.marker)}},{key:"canSeeLocation",value:function(){return u.a.can("view accurate location")||u.a.owns(this.props.owner_id)||u.a.inGroupWith(this.props.owner_id)}},{key:"openCallout",value:function(){this.callout.close(),this.callout.setContent(this.renderCallout()),this.callout.open(this.props.map,this.marker),this.props.onClick()}},{key:"componentWillReceiveProps",value:function(e){this.marker.setVisible(e.show)}},{key:"renderCallout",value:function(){var e=document.createElement("div");return s.a.render(this.props.children,e),e}},{key:"render",value:function(){return null}},{key:"componentWillUnmount",value:function(){this.props.onDestroy(this.marker)}}]),t}();t.a=f;f.propTypes={maps:i.a.object,position:i.a.object.isRequired,title:i.a.string,show:i.a.bool,onCreate:i.a.func,onClick:i.a.func,onDestroy:i.a.func,owner_id:i.a.number},f.defaultProps={title:"",show:!0,onCreate:function(){},onClick:function(){},onHide:function(){},onDestroy:function(){},owner_id:0}},"OE/d":function(e,t,n){"use strict";var a=n("t4LX"),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t&&(t=JSON.parse(JSON.stringify(window.TreeSnap))),this._role=null!==t.role?t.role.toLowerCase():null,this._isLoggedIn=t.loggedIn,this._isAdmin="admin"===this._role,this._isScientist="scientist"===this._role,this._user=t.user,this._groups=[],this._abilities={member:[],owner:[],admin:[]},this._role&&(this._role=this._role.toLowerCase()),this.initAbilities(),this.loadGroups(),a.a.listen("user.groups.updated",this.loadGroups.bind(this))}return i(e,[{key:"initAbilities",value:function(){this._abilities.user=["create notes","create collections","flag observations"],this._abilities.scientist=["contact users","confirm species","access admin pages","view accurate location"].concat(this._abilities.user),this._abilities.admin=["manage users","delete observations","manage events"].concat(this._abilities.scientist)}},{key:"loadGroups",value:function(){var e=this;this.authenticated()&&axios.get("/web/groups?with_users=1").then(function(t){e._groups=t.data.data.map(function(e){return{id:e.id,users:e.users.map(function(e){return e.id})}})}).catch(function(e){console.log(e)})}},{key:"can",value:function(e){return!(!this.authenticated()||null===this._role)&&this._abilities[this._role].indexOf(e)>-1}},{key:"owns",value:function(e,t){return void 0===t&&(t="user_id"),"object"===(void 0===e?"undefined":r(e))?Array.isArray(e)?e.every(this.owns.bind(this)):void 0!==e[t]&&e[t]===this._user.id:"number"==typeof e&&this._user.id===e}},{key:"inGroupWith",value:function(e){for(var t in this._groups)if(this._groups[t].users.indexOf(e)>-1)return!0;return!1}},{key:"inGroup",value:function(e){for(var t in this._groups)if(this._groups[t].id===e)return!0;return!1}},{key:"authenticated",value:function(){return this._isLoggedIn}},{key:"admin",value:function(){return this._isAdmin}},{key:"scientist",value:function(){return this._isScientist}},{key:"role",value:function(){return this._role}},{key:"user",value:function(){return this._user}}]),e}();t.a=new o},R3sX:function(e,t,n){(function(t){var n="Expected a function",a=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,h="object"==typeof self&&self&&self.Object===Object&&self,f=u||h||Function("return this")(),p=Object.prototype.toString,d=Math.max,m=Math.min,v=function(){return f.Date.now()};function b(e,t,a){var r,i,o,s,l,c,u=0,h=!1,f=!1,p=!0;if("function"!=typeof e)throw new TypeError(n);function b(t){var n=r,a=i;return r=i=void 0,u=t,s=e.apply(a,n)}function w(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-u>=o}function _(){var e=v();if(w(e))return E(e);l=setTimeout(_,function(e){var n=t-(e-c);return f?m(n,o-(e-u)):n}(e))}function E(e){return l=void 0,p&&r?b(e):(r=i=void 0,s)}function k(){var e=v(),n=w(e);if(r=arguments,i=this,c=e,n){if(void 0===l)return function(e){return u=e,l=setTimeout(_,t),h?b(e):s}(c);if(f)return l=setTimeout(_,t),b(c)}return void 0===l&&(l=setTimeout(_,t)),s}return t=y(t)||0,g(a)&&(h=!!a.leading,o=(f="maxWait"in a)?d(y(a.maxWait)||0,t):o,p="trailing"in a?!!a.trailing:p),k.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=c=i=l=void 0},k.flush=function(){return void 0===l?s:E(v())},k}function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==r}(e))return a;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):o.test(e)?a:+e}e.exports=function(e,t,a){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError(n);return g(a)&&(r="leading"in a?!!a.leading:r,i="trailing"in a?!!a.trailing:i),b(e,t,{leading:r,maxWait:t,trailing:i})}}).call(t,n("DuR2"))},YSmg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("LvfB");var a=n("GiK3"),r=n.n(a),i=n("KSGD"),o=n.n(i),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),s(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar-content-container flexbox flex-column flex-space-between"},r.a.createElement("a",{className:"close",onClick:this.props.onCloseRequest},r.a.createElement("i",{className:"fa fa-arrow-left"})),this.props.children))}}]),t}(),c=l;l.propTypes={onCloseRequest:o.a.func},l.defaultProps={onCloseRequest:function(){}};var u=n("cabM"),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),h(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"copyright"},"Data ©",(new Date).getFullYear()," ",r.a.createElement("a",{target:"_blank",href:"https://utk.edu"},"UTK")," and ",r.a.createElement("a",{target:"_blank",href:"http://www.uky.edu/UKHome/"},"UKY"))}}]),t}(),p=n("h7v/"),d=n("NdNt"),m=n("c8iI"),v=n("0dG/"),b=n.n(v),g=n("saAw"),y=n("PJh5"),w=n.n(y),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var E=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={visible:!1,shown:!1},n.storageID="disclaimer_last_show_"+n.props.id,n.shouldShow=n.determineShouldShow(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),_(t,[{key:"determineShouldShow",value:function(){if(!window.localStorage)return!0;var e=window.localStorage.getItem(this.storageID);return!e||!!w()().subtract(7,"days").isAfter(e)&&(window.localStorage.removeItem(this.storageID),!0)}},{key:"close",value:function(){this.setState({visible:!1})}},{key:"dontShowAgain",value:function(){this.close(),window.localStorage&&window.localStorage.setItem(this.storageID,w()())}},{key:"show",value:function(){!this.state.shown&&this.shouldShow&&this.setState({visible:!0,shown:!0})}},{key:"render",value:function(){return r.a.createElement("div",{className:"notification is-info floating-disclaimer"+(this.state.visible?" is-active":""),onClick:function(e){return e.stopPropagation()}},r.a.createElement("button",{className:"delete",type:"button",onClick:this.close.bind(this)}),this.props.children,r.a.createElement("div",{className:"mt-0"},r.a.createElement("button",{className:"button is-info is-inverted is-small",onClick:this.dontShowAgain.bind(this)},"Don't show me this again")))}}]),t}(),k=E;E.propTypes={id:o.a.number},E.defaultProps={id:0};var S=n("Hwqd"),T=n("OE/d"),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var N=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return void 0===n&&(n=[]),a._searchTerm="",a._markers=e,a._categories=n,a._mapBounds=null,a._collectionID=0,a._confirmed=!1,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,S["a"]),O(t,[{key:"replace",value:function(e){return this._markers=e,this._filter()}},{key:"setCategories",value:function(e){this._categories=e}},{key:"search",value:function(e){return this._searchTerm=e.trim().toLowerCase(),this._filter()}},{key:"category",value:function(e){return this._categories=e,this._filter()}},{key:"bounds",value:function(e){return this._mapBounds=e,this._filter()}},{key:"collections",value:function(e){return this._collectionID=parseInt(e),this._filter()}},{key:"confirmed",value:function(e){return this._confirmed=1===parseInt(e),this._filter()}},{key:"newCollection",value:function(e,t){if(T.a.authenticated())for(var n=0;n<this._markers.length;n++)if(e.id===this._markers[n].id)return this._markers[n].collections.push(t),this._markers[n]}},{key:"newFlag",value:function(e,t){if(T.a.authenticated())for(var n=0;n<this._markers.length;n++)if(e.id===this._markers[n].id)return this._markers[n].flags.push(t),this._markers[n]}},{key:"removeCollection",value:function(e,t){if(T.a.authenticated())for(var n=0;n<this._markers.length;n++)if(e.id===this._markers[n].id)return this._markers[n].collections=this._markers[n].collections.filter(function(e){return t!==e.id}),this._markers[n]}},{key:"removeFlag",value:function(e,t){if(T.a.authenticated())for(var n=0;n<this._markers.length;n++)if(e.id===this._markers[n].id)return this._markers[n].flags=this._markers[n].flags.filter(function(e){return parseInt(t)!==e.id}),this._markers[n]}},{key:"resetBounds",value:function(){this._mapBounds=null}},{key:"_search",value:function(e){return 0===this._searchTerm.length||(!!this._contains(e.title,this._searchTerm)||!!this._contains(e.owner,this._searchTerm))}},{key:"_category",value:function(e){return 0!==this._categories.length&&-1!==this._categories.indexOf(e.category)}},{key:"_bounds",value:function(e){if(null===this._mapBounds)return!0;var t={lat:e.position.latitude,lng:e.position.longitude};return this._mapBounds.contains(t)}},{key:"_collection",value:function(e){return this._collectionID<=0||-1!==this._flatten(e.collections).indexOf(this._collectionID)}},{key:"_confirmedOnly",value:function(e){return!1===this._confirmed||e.confirmations_count>0}},{key:"_filter",value:function(){var e=this;return this._markers.filter(function(t){return e._bounds(t)&&e._search(t)&&e._category(t)&&e._collection(t)&&e._confirmedOnly(t)})}}]),t}(),C=n("jVml"),x=n("F8kA"),I=n("5zKI"),F=n("5L7H"),P=n("iwoP"),M=n("mOuh"),j=n("IFrJ"),L=n("DakW"),D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var A=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initPosition(),n.initialLoad=!0,n.state={markers:[],categories:[],selectedCategories:[],selectedConfirmation:0,center:n.defaultMapPosition.center,zoom:n.defaultMapPosition.zoom,selectedMarker:null,galleryImages:[],showSidebar:!1,loading:!1,showFilters:!1,searchTerm:"",collections:[],selectedCollection:0,filters:[],selectedFilter:0,showFiltersModal:!1,total:0,showCollectionsForm:!1,showFlagForm:!1,ownedCollections:[],appliedAdvancedFilter:!1,AdvancedFiltersModal:null},document.title="Map - TreeSnap",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,L["a"]),R(t,[{key:"componentWillMount",value:function(){this.loadCategories(),this.loadCollections(),this.loadFilters(),this.loadCount(),document.body.className="map-page"}},{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.initSidebar(),n.e(31).then(n.bind(null,"C6vg")).then(function(t){e.setState({AdvancedFiltersModal:t.default})})}},{key:"initPosition",value:function(){this.defaultMapPosition={center:{lat:40.354388,lng:-95.998237},zoom:5};try{var e=j.a.parseUrl(this.props.location.search);if(void 0!==e.zoom){var t=parseInt(e.zoom);!isNaN(t)&&t>1&&t<16&&(this.defaultMapPosition.zoom=t)}if(void 0!==e.center){var n=e.center.split(",");if(2===n.length){var a=parseFloat(n[0]),r=parseFloat(n[1]);isNaN(a)||isNaN(r)||(this.defaultMapPosition.center={lat:a,lng:r})}}}catch(e){console.log(e)}}},{key:"componentWillUnmount",value:function(){document.body.className=""}},{key:"loadCount",value:function(){var e=this;axios.get("/web/map/count").then(function(t){e.setState({total:t.data.data.count})}).catch(function(e){console.log(e.response)})}},{key:"initSidebar",value:function(){window.outerWidth>797&&(this.setState({showSidebar:!0,showFilters:!0}),this.refs.maps.resize())}},{key:"openSidebar",value:function(){this.setState({showSidebar:!0}),this.refs.maps.resize()}},{key:"closeSidebar",value:function(){this.setState({showSidebar:!1,showCollectionsForm:!1,showFlagForm:!1}),this.refs.maps.resize()}},{key:"updateHistory",value:function(e,t){var n=void 0,a=void 0;n="function"==typeof e.lat?e.lat():e.lat,a="function"==typeof e.lng?e.lng():e.lng,this.props.history.replace("/map/?center="+n+","+a+"&zoom="+t)}},{key:"loadObservations",value:function(){var e=this,t=this.refs.maps.getBounds();axios.get("/web/map",{params:{bounds:{southWest:t.getSouthWest().toJSON(),northEast:t.getNorthEast().toJSON()}}}).then(function(t){e.initialLoad=!1;var n=t.data.data;T.a.admin()||T.a.scientist()||e.disclaimer.show();var a=void 0;e.filter?(e.filter.resetBounds(),a=e.filter.replace(n)):(e.filter=new N(n,e.state.selectedCategories),a=e.filter._filter()),e.setState({markers:a,loading:!1})}).catch(function(t){e.setState({loading:!1}),console.log(t)})}},{key:"loadCategories",value:function(){var e=this;axios.get("/web/observations/categories").then(function(t){var n=t.data.data;e.setState({categories:n,selectedCategories:n}),e.filter&&e.filter.setCategories(n)}).catch(function(e){console.log(e.response)})}},{key:"loadCollections",value:function(){var e=this;T.a.authenticated()&&(axios.get("/web/collections/1").then(function(t){e.setState({collections:t.data.data})}).catch(function(e){e.response&&401===e.response.status||console.log(e.response)}),axios.get("/web/collections/customizable/1").then(function(t){e.setState({ownedCollections:t.data.data})}).catch(function(e){e.response&&401===e.response.status||console.log(e.response)}))}},{key:"loadFilters",value:function(){var e=this;T.a.authenticated()&&axios.get("/web/filters").then(function(t){var n=t.data.data.map(function(e){return{label:e.name,value:e.id}});e.setState({filters:n})}).catch(function(e){e.response&&401===e.response.status||console.log(e.response)})}},{key:"goToSubmission",value:function(e,t){void 0===t&&(t=15);var n={lat:e.position.latitude,lng:e.position.longitude};this.refs.maps.goTo(new google.maps.LatLng(n),t),this.updateHistory(n,t)}},{key:"_renderSubmission",value:function(e){var t=this,n=e.title;return n.length>30&&(n=n.substr(0,30)+"..."),r.a.createElement("a",{href:"javascript:;",role:"button",className:"bar-item",style:{backgroundImage:"url("+e.thumbnail+")"},key:"marker_"+e.id,onClick:function(){t.setState({selectedMarker:e,showFilters:!1}),t.openSidebar();var n=t.refs.maps.getZoom();t.goToSubmission(e,n>10?n:13),null!==e.ref&&e.ref.openCallout()}},r.a.createElement("div",{className:"bar-item-field"},r.a.createElement("strong",{style:{color:"#fff"}},n),r.a.createElement("p",{style:{color:"#eee",fontWeight:"500",fontSize:"14px"}},e.owner),r.a.createElement("p",{style:{color:"#eee",fontWeight:"500",fontSize:"14px"}},e.date)))}},{key:"resetMapPosition",value:function(){this.refs.maps.goTo(this.defaultMapPosition.center,this.defaultMapPosition.zoom)}},{key:"changeCategory",value:function(e){var t=this.state.categories;"all"!==e&&(t=[e]);var n=this.filter.category(t);this.setState({markers:n,selectedCategories:t})}},{key:"changeCollection",value:function(e){var t=this.filter.collections(e);this.setState({markers:t,selectedCollection:e})}},{key:"changeConfirmation",value:function(e){e=parseInt(e);var t=this.filter.confirmed(e);this.setState({markers:t,selectedConfirmation:e})}},{key:"changeFilter",value:function(e){e=parseInt(e),this.setState({selectedFilter:e}),0!==e?this.applyAdvancedFilter(e):(this.loadObservations(),I.a.push("Advanced filters removed."))}},{key:"applyAdvancedFilter",value:function(e){var t=this;this.setState({loading:!0}),axios.get("/web/filter/"+e,{params:{map:1}}).then(function(e){var n=e.data.data,a=n.observations,r=n.filter,i=t.filter.replace(a);t.setState({markers:i,loading:!1,total:a.length}),r&&I.a.push('Filter "'+r.name+'" has been applied.')}).catch(function(e){t.setState({loading:!1}),console.log(e)})}},{key:"filterCreated",value:function(e){var t=e.data;if(t.filter){var n=this.state.filters.concat({label:t.filter.name,value:t.filter.id}),a=t.filter.id;this.setState({filters:n,selectedFilter:a}),I.a.push('Filter "'+t.filter.name+'" has been created and applied.')}else this.setState({selectedFilter:0}),I.a.push("Advanced filters applied.");var r=this.filter.replace(t.observations);this.setState({markers:r,showFiltersModal:!1,appliedAdvancedFilter:!0})}},{key:"search",value:function(e){var t=this.filter.search(e);this.setState({markers:t,searchTerm:e})}},{key:"boundsChanged",value:function(e){var t=this.refs.maps.getCenter(),n=this.refs.maps.getZoom();if(this.updateHistory(t,n),this.initialLoad||0!==parseInt(this.state.selectedFilter)||this.state.appliedAdvancedFilter){if(this.filter){var a=this.filter.bounds(e);this.setState({markers:a})}}else this.loadObservations()}},{key:"_renderMap",value:function(){var e=this;return r.a.createElement(p.a,{id:"map2",ref:"maps",center:this.state.center,zoom:this.state.zoom,onBoundsChange:this.boundsChanged.bind(this),onLoad:this.loadObservations.bind(this)},this.state.markers.map(function(t){return r.a.createElement(d.a,{key:t.id,position:t.position,title:t.title,ref:function(e){return t.ref=e},owner_id:t.user_id,onClick:function(){e.setState({selectedMarker:t,showFilters:!1,showCollectionsForm:!1,showFlagForm:!1}),window.innerWidth>797&&e.openSidebar()}},r.a.createElement("div",{className:"media callout is-flex flex-v-center"},r.a.createElement("div",{className:"media-left mr-0"},r.a.createElement("img",{src:t.thumbnail,alt:t.title,style:{width:50,height:"auto"}})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"mb-0"},r.a.createElement("strong",null,t.title)),r.a.createElement("div",{className:"mb-0"},"By ",t.owner),r.a.createElement("a",{href:"/observation/"+t.id},"See full description"))))}))}},{key:"_renderBottomBar",value:function(){var e=this;return r.a.createElement("div",{className:"horizontal-bar",id:"horizontal-bar-container"},r.a.createElement("a",{href:"javascript:;",className:"scroll scroll-left",onClick:this.scrollLeft.bind(this)},r.a.createElement("i",{className:"fa fa-chevron-left"})),r.a.createElement("div",{className:"bar-items-container dragscroll",id:"horizontal-bar",style:{overflowX:0===this.state.markers.length?"hidden":"scroll"},onScroll:this.setScrollState.bind(this)},this.state.markers.slice(0,20).map(function(t,n){return e._renderSubmission(t,n)}),0===this.state.markers.length?r.a.createElement("p",{className:"ml-1 mt-1 has-text-white"},"No results found. Try zooming out or moving the map to cover the locations you are interested in."):null),r.a.createElement("a",{href:"javascript:;",className:"scroll scroll-right",onClick:this.scrollRight.bind(this)},r.a.createElement("i",{className:"fa fa-chevron-right"})))}},{key:"setScrollState",value:function(){var e=document.getElementById("horizontal-bar"),t=document.getElementById("horizontal-bar-container");e.offsetWidth+e.scrollLeft===e.scrollWidth?(t.style.paddingRight="65px",e.scrollLeft+=65):t.style.paddingRight=0}},{key:"scrollRight",value:function(){var e=0,t=void 0;t=setInterval(function(){200===e&&clearInterval(t),e+=5,document.getElementById("horizontal-bar").scrollLeft+=5},5)}},{key:"scrollLeft",value:function(){var e=0,t=void 0;t=setInterval(function(){200===e&&clearInterval(t),e+=5,document.getElementById("horizontal-bar").scrollLeft-=5},5)}},{key:"_renderFilters",value:function(){var e=this;return r.a.createElement("div",{className:"sidebar-filters"},r.a.createElement("p",{className:"mb-0",style:{marginTop:-10}},"Showing ",this.state.markers.length," out of ",this.state.total),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Filters"),r.a.createElement("p",{className:"control has-icon has-icon-right"},r.a.createElement("input",{className:"input",type:"search",placeholder:"Search visible area on map",value:this.state.searchTerm,onChange:function(t){var n=t.target;return e.search(n.value)}}),r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fa fa-search"}))),r.a.createElement("p",{className:"help"},"Search by user name or observation title.")),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Observation Category"),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"select is-full-width"},r.a.createElement("select",{onChange:function(t){var n=t.target;e.changeCategory(n.value)},value:1===this.state.selectedCategories.length?this.state.selectedCategories[0]:"all"},r.a.createElement("option",{value:"all"},"All Categories"),this.state.categories.map(function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Collections"),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"select is-full-width"},r.a.createElement("select",{value:this.state.selectedCollection,name:"collections",onChange:function(t){var n=t.target;return e.changeCollection(n.value)}},r.a.createElement("option",{value:0},"Select Collection"),this.state.collections.map(function(e){return r.a.createElement("option",{value:parseInt(e.value),key:e.value},e.label)}))),0===this.state.filters.length?r.a.createElement("p",{className:"help is-warning"},"You currently have no saved collections"):null,r.a.createElement("p",{className:"help"},"You can create or add observations to a collection using the",r.a.createElement("span",{className:"ml-0 mr-0 icon is-small"},r.a.createElement("i",{className:"fa fa-star"}))," icon."))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Saved Advanced Filters"),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"select is-full-width"},r.a.createElement("select",{value:this.state.selectedFilter,onChange:function(t){var n=t.target;return e.changeFilter(n.value)}},r.a.createElement("option",{value:0},"Select Saved Filter"),this.state.filters.map(function(e){return r.a.createElement("option",{value:parseInt(e.value),key:e.value},e.label)}))),0===this.state.filters.length?r.a.createElement("p",{className:"help is-warning"},"You currently have no saved filters"):null,r.a.createElement("p",{className:"help"},"You can save advanced filters by providing a label before applying the filters."))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Confirmed by Scientists"),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"select is-full-width"},r.a.createElement("select",{value:this.state.selectedConfirmation,onChange:function(t){var n=t.target;return e.changeConfirmation(n.value)}},r.a.createElement("option",{value:0},"Show All"),r.a.createElement("option",{value:1},"Show only confirmed observations"))),r.a.createElement("p",{className:"help"},"Allows you to view only confirmed observations."))),r.a.createElement("p",{className:"mt-1 has-text-centered"},this.state.appliedAdvancedFilter||0!==this.state.selectedFilter?r.a.createElement("a",{href:"javascript:;",className:"button is-danger",onClick:function(){e.setState({appliedAdvancedFilter:!1,loading:!0,selectedFilter:0}),e.loadObservations()}},"Clear Advanced Filters"):r.a.createElement("a",{href:"javascript:;",className:"button is-primary",onClick:function(){return e.setState({showFiltersModal:!0})}},"More Advanced Filters")))}},{key:"_renderSidebar",value:function(){var e=this;return null===this.state.selectedMarker&&!1===this.state.showFilters?r.a.createElement(c,null):r.a.createElement(c,{onCloseRequest:function(){e.state.showCollectionsForm||e.state.showFlagForm?e.setState({showCollectionsForm:!1,showFlagForm:!1}):e.closeSidebar()}},this.getSidebarContent(),this.state.showCollectionsForm||this.state.showFlagForm?r.a.createElement("div",{className:"sidebar-bottom-bar"},r.a.createElement("a",{href:"javascript:;",onClick:function(){e.setState({showCollectionsForm:!1,showFlagForm:!1})}},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fa fa-arrow-left"})),r.a.createElement("span",null,"Return to Observation"))):null)}},{key:"getSidebarContent",value:function(){return this.state.showFilters?this._renderFilters():null!==this.state.selectedMarker?this.state.showCollectionsForm?this._renderCollectionsForm():this.state.showFlagForm?this._renderFlagForm():this._renderObservation():null}},{key:"showCollectionsForm",value:function(){this.setState({showFilters:!1,showFlagForm:!1,showCollectionsForm:!0})}},{key:"showFlagForm",value:function(){this.setState({showFilters:!1,showFlagForm:!0,showCollectionsForm:!1})}},{key:"_renderCollectionsForm",value:function(){var e=this;return r.a.createElement("div",{className:"p-1"},r.a.createElement("h4",{className:"title is-4 mb-1",style:{maxWidth:"225px"}},"Add ",this.state.selectedMarker.title," to a collection"),r.a.createElement(F.a,{observationId:this.state.selectedMarker.id,collections:this.state.ownedCollections,onSubmit:function(t){I.a.push('Observation added to "'+t.label+'" successfully'),e.setState({});for(var n=e.state.collections,a=0;a<n.length;a++)if(n[a].value===t.id)return;n.push({label:t.label,value:t.id}),e.setState({collections:n,ownedCollections:e.state.ownedCollections.concat({label:t.label,value:t.id}),selectedMarker:e.filter.newCollection(e.state.selectedMarker,t)})}}),this.state.selectedMarker.collections.length>0?r.a.createElement("div",{className:"field mt-1"},r.a.createElement("label",{className:"label"},"This observation is in the following collections")):null,this.state.selectedMarker.collections.map(function(t){return r.a.createElement("div",{key:t.id,className:"flexbox flex-space-between flex-v-center mt-1"},r.a.createElement("div",null,t.label),r.a.createElement("div",null,r.a.createElement("button",{className:"button is-small is-outlined is-danger",type:"button",onClick:function(){return e.removeCollection(e.state.selectedMarker,t)}},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fa fa-times"})))))}))}},{key:"removeCollection",value:function(e,t){var n=this;axios.delete("/web/collection/detach",{params:{observation_id:e.id,collection_id:t.id}}).then(function(a){n.setState({selectedMarker:n.filter.removeCollection(e,parseInt(t.id))}),I.a.push("Observation removed from collection successfully")}).catch(function(e){console.log(e)})}},{key:"_renderFlagForm",value:function(){var e=this,t=this.state.selectedMarker.flags.length>0;return r.a.createElement("div",{className:"p-1"},r.a.createElement("h4",{className:"title is-4 mb-1",style:{maxWidth:"225px"}},"Flag ",this.state.selectedMarker.title),r.a.createElement(P.a,{observationId:this.state.selectedMarker.id,collections:this.state.collections,flagged:t,flagId:t?this.state.selectedMarker.flags[0].id:0,onSubmit:function(t){I.a.push("Observation has been flagged"),e.setState({selectedMarker:e.filter.newFlag(e.state.selectedMarker,t)})},onUndo:function(t){I.a.push("Flag removed successfully"),e.setState({selectedMarker:e.filter.removeFlag(e.state.selectedMarker,parseInt(t.id))})}}),t?r.a.createElement("button",{className:"button is-link",style:{float:"right",position:"relative",top:-35},onClick:function(){return e.setState({showFlagForm:!1})}},"Done"):null)}},{key:"_renderObservation",value:function(){var e=this,t=this.state.selectedMarker,n=t.data;return r.a.createElement("div",null,r.a.createElement("div",{className:"sidebar-img",style:{backgroundImage:"url("+t.thumbnail+")"}},r.a.createElement("a",{href:"javascript:;",className:"sidebar-img-overlay flexbox flex-v-center flex-h-center flex-column",onClick:function(){e.setState({galleryImages:t.images,showModal:!0})}},r.a.createElement("i",{className:"fa fa-photo"}),r.a.createElement("div",{className:"has-text-centered"},"Click to Enlarge"))),r.a.createElement("div",{className:"sidebar-icons-container"},r.a.createElement("div",{className:"card-footer"},r.a.createElement("a",{href:"javascript:;",className:"flex-column",onClick:function(){e.setState({galleryImages:t.images,showModal:!0})}},r.a.createElement("i",{className:"fa fa-picture-o"}),r.a.createElement("span",{className:"help"},"Images")),r.a.createElement("a",{href:"javascript:;",className:"flex-column"+(t.collections.length>0?" is-success":""),onClick:this.showCollectionsForm.bind(this)},r.a.createElement("i",{className:"fa fa-star"}),r.a.createElement("span",{className:"help"},"Save")),r.a.createElement("a",{href:"javascript:;",className:"flex-column"+(t.flags.length>0?" is-danger":""),onClick:this.showFlagForm.bind(this)},r.a.createElement("i",{className:"fa fa-flag"}),r.a.createElement("span",{className:"help"},"Flag")))),r.a.createElement("div",{className:"sidebar-content"},r.a.createElement("h3",{className:"title is-4"},t.title),t.custom_id?r.a.createElement("div",{className:"sidebar-item"},r.a.createElement("h5",null,r.a.createElement("strong",null,"Custom Tree Identifier")),r.a.createElement("p",{className:"ml-1"},t.custom_id)):null,t.mobile_id?r.a.createElement("div",{className:"sidebar-item"},r.a.createElement("h5",null,r.a.createElement("strong",null,"ID")),r.a.createElement("p",{className:"ml-1"},t.mobile_id)):null,r.a.createElement("div",{className:"sidebar-item"},r.a.createElement("h5",null,r.a.createElement("strong",null,"Collection Date")),r.a.createElement("p",{className:"ml-1"},t.date)),Object.keys(n).map(function(a){if(a.indexOf("_values")>-1||a.indexOf("_units")>-1||a.indexOf("_confidence")>-1)return null;var r=null;void 0!==n[a+"_units"]&&(r=n[a+"_units"]);var i=void 0!==C.a[a]?C.a[a]:a;return e._renderMetaData(i,n[a],a,t,r)}),r.a.createElement("div",{className:"sidebar-item"},r.a.createElement("h5",null,r.a.createElement("strong",null,"Observation Page")),r.a.createElement("p",{className:"ml-1"},r.a.createElement(x.b,{to:"/observation/"+t.id},"Visit Observation Page")))))}},{key:"_renderMetaData",value:function(e,t,n,a,i){return!0===M.a.isJson(t)&&(t=JSON.parse(t)),"object"===(void 0===t?"undefined":D(t))?null:r.a.createElement("div",{className:"sidebar-item",key:n},r.a.createElement("h5",null,r.a.createElement("strong",null,e)),r.a.createElement("div",{className:"ml-1"},t," ",i,"comment"===n&&a.has_private_comments?r.a.createElement("p",{className:"help"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fa fa-lock"})),r.a.createElement("span",null,"Only you can see this comment")):null))}},{key:"_renderFilterButton",value:function(){var e=this;return r.a.createElement("a",{href:"javascript:;",className:"button filters-button",onClick:function(){e.setState({selectedMarker:null,showFilters:!e.state.showFilters}),e.state.showFilters?e.closeSidebar():e.openSidebar()}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fa fa-filter"})),r.a.createElement("span",null,"Filters"))}},{key:"_renderImage",value:function(e){return r.a.createElement("div",{className:"image-gallery-image"+(this.state.galleryImages.length>1?" show-scroll":"")},r.a.createElement("img",{src:e.original,alt:"Plant Image"}))}},{key:"_renderImagesModal",value:function(){var e=this;if(!this.state.showModal)return null;if(0===this.state.galleryImages.length)return r.a.createElement(m.a,{large:!0,onCloseRequest:function(){return e.setState({showModal:!1})}});var t=[];return this.state.galleryImages.map(function(e){t.push({original:e})}),r.a.createElement(m.a,{onCloseRequest:function(){return e.setState({showModal:!1})}},r.a.createElement(b.a,{items:t,showThumbnails:!1,showFullscreenButton:!1,showPlayButton:!1,renderItem:this._renderImage.bind(this)}))}},{key:"render",value:function(){var e=this,t=this.state.AdvancedFiltersModal;return r.a.createElement("div",{className:this.state.showSidebar?"sidebar-visible":""},r.a.createElement(u.a,{container:!0}),this._renderSidebar(),this._renderMap(),this._renderFilterButton(),this._renderBottomBar(),this._renderImagesModal(),r.a.createElement(k,{ref:function(t){return e.disclaimer=t}},"Notice: For privacy reasons, the location of the trees displayed on this map have been altered. To learn more, visit our ",r.a.createElement("a",{href:"/faq"},"Frequently Asked Questions")," page."),r.a.createElement(f,null),r.a.createElement(g.a,{visible:this.state.loading,containerStyle:{backgroundColor:"rgba(255,255,255,0.8)"}}),t?r.a.createElement(t,{visible:this.state.showFiltersModal,onCloseRequest:function(){return e.setState({showFiltersModal:!1})},onCreate:this.filterCreated.bind(this),map:!0}):null)}}]),t}();t.default=A},c8iI:function(e,t,n){"use strict";var a=n("GiK3"),r=n.n(a),i=n("KSGD"),o=n.n(i),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),s(t,[{key:"close",value:function(){this.props.permanent||this.props.onCloseRequest()}},{key:"render",value:function(){return r.a.createElement("div",{className:"modal is-active"},this.props.permanent||!this.props.showClose?null:r.a.createElement("button",{className:"close-modal",onClick:this.close.bind(this),style:{zIndex:999999}},r.a.createElement("i",{className:"fa fa-times"})),r.a.createElement("div",{className:"modal-background",onClick:this.close.bind(this)}),this.props.card?this.props.children:r.a.createElement("div",{className:"modal-content image-slider",style:{width:"100%",maxWidth:"700px"}},this.props.children))}}]),t}();t.a=l,l.propTypes={onCloseRequest:o.a.func.isRequired,permanent:o.a.bool,showClose:o.a.bool,card:o.a.bool},l.defaultProps={permanent:!1,showClose:!0,card:!1}},cabM:function(e,t,n){"use strict";var a=n("GiK3"),r=n.n(a),i=n("KSGD"),o=n.n(i),s=n("IFrJ"),l=n("F8kA"),c=n("OE/d"),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isActive:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),u(t,[{key:"toggle",value:function(){this.setState({isActive:!this.state.isActive})}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar"+(this.props.home?" home-nav":"")},r.a.createElement("div",{className:this.props.container?"container is-fluid":"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(l.c,{to:"/",className:"navbar-item"},r.a.createElement("img",{src:"/logo/ts-logo-"+(this.props.home?"48":"32")+".png",alt:"Logo",className:"logo-img"}),r.a.createElement("span",{className:"logo-text"},r.a.createElement("b",null,"Tree"),r.a.createElement("span",{style:{fontWeight:300}},"Snap"))),r.a.createElement("div",{className:"navbar-burger",onClick:this.toggle.bind(this)},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),r.a.createElement("div",{className:"navbar-menu"+(this.state.isActive?" is-active":"")},r.a.createElement("div",{className:"navbar-end"},r.a.createElement("a",{href:"https://www.facebook.com/treesnapapp/",className:"navbar-item"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fa fa-facebook"}))),r.a.createElement("a",{href:"https://twitter.com/Treesnapapp",className:"navbar-item"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fa fa-twitter"})))),r.a.createElement("div",{className:"navbar-end"},r.a.createElement(l.c,{exact:!0,to:"/",className:"navbar-item",activeClassName:"is-active"},"Home"),r.a.createElement(l.c,{to:"/map",className:"navbar-item",activeClassName:"is-active"},"Map"),r.a.createElement(l.c,{to:"/partners",className:"navbar-item",activeClassName:"is-active"},"Scientific Partners"),r.a.createElement(l.c,{to:"/about",className:"navbar-item",activeClassName:"is-active"},"About"),c.a.authenticated()?r.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},r.a.createElement(l.c,{to:"/account",className:"navbar-link",activeClassName:"is-active"},"Account"),r.a.createElement("div",{className:"navbar-dropdown"},r.a.createElement(l.c,{to:"/account/observations",className:"navbar-item",activeClassName:"is-active"},"My Observations"),r.a.createElement(l.c,{to:"/account/groups",className:"navbar-item",activeClassName:"is-active"},"Groups"),r.a.createElement(l.c,{to:"/account/collections",className:"navbar-item",activeClassName:"is-active"},"Collections"),r.a.createElement(l.c,{to:"/account/filters",className:"navbar-item",activeClassName:"is-active"},"Filters"),r.a.createElement("hr",{className:"navbar-divider"}),r.a.createElement(l.c,{to:"/account",className:"navbar-item",activeClassName:"is-active"},"Settings"),r.a.createElement("a",{href:"/logout",className:"navbar-item"},"Logout"))):null,c.a.authenticated()?null:r.a.createElement("a",{href:"/login",className:"navbar-item "+s.a.isActive("/login")},"Login"),c.a.authenticated()?null:r.a.createElement("a",{href:"/register",className:"navbar-item "+s.a.isActive("/register")},"Register"),c.a.can("access admin pages")?r.a.createElement("a",{href:"/admin",className:"navbar-item "+s.a.isActive("/admin",!1)},"Admin"):null))))}}]),t}();t.a=h,h.propTypes={container:o.a.bool,home:o.a.bool},h.defaultProps={container:!1,home:!1}},"h7v/":function(e,t,n){"use strict";var a=n("GiK3"),r=n.n(a),i=n("KSGD"),o=n.n(i),s=n("NdNt"),l=n("t4LX"),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cluster=null,n.markers=[],n.colors={"American Chestnut":"https://maps.google.com/mapfiles/ms/icons/green-dot.png",Ash:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png",Hemlock:"https://maps.google.com/mapfiles/ms/icons/red-dot.png","White Oak":"https://maps.google.com/mapfiles/ms/icons/yellow-dot.png",Other:"https://maps.google.com/mapfiles/ms/icons/purple-dot.png"},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),u(t,[{key:"componentDidMount",value:function(){var e=this,t={center:{lat:this.props.center.lat,lng:this.props.center.lng},zoom:this.props.zoom,minZoom:4,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_CENTER}};this.maps=new google.maps.Map(this.refs.mapContainer,t),this.setState({center:t.center,zoom:t.zoom}),this.maps.addListener("idle",function(){e.props.onBoundsChange(e.getBounds())}),this.maps.addListener("click",function(){return l.a.emit("mapClicked")}),this.cluster=new MarkerClusterer(this.maps,[],{imagePath:"/images/map/m",maxZoom:7}),google.maps.event.addListenerOnce(this.maps,"idle",this.props.onLoad)}},{key:"resize",value:function(){var e=this;setTimeout(function(){google.maps.event.trigger(e.maps,"resize")},300)}},{key:"goTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;this.maps.setCenter(e),this.maps.setZoom(t),google.maps.event.trigger(this.maps,"idle")}},{key:"renderChildren",value:function(){var e=this;return this.refs&&this.refs.mapContainer?r.a.Children.map(this.props.children,function(t){return t.type===s.a?r.a.cloneElement(t,{maps:e.maps,onCreate:function(t){e.markers.push(t),e.createCluster()},onDestroy:function(t){e.markers=e.markers.filter(function(e){return t!==e}),e.createCluster(),t.setMap(null)}}):t}):null}},{key:"getBounds",value:function(){return this.maps.getBounds()}},{key:"getCenter",value:function(){return this.maps.getCenter()}},{key:"getZoom",value:function(){return this.maps.getZoom()}},{key:"getMaps",value:function(){return this.maps}},{key:"createCluster",value:function(){if(0===this.props.children.length&&null!==this.cluster&&this.cluster.clearMarkers(),this.props.children.length>0&&this.markers.length===this.props.children.length){if(null!==this.cluster)return this.cluster.clearMarkers(),void this.cluster.addMarkers(this.markers);this.cluster=new MarkerClusterer(this.maps,this.markers,{imagePath:"/images/map/m",maxZoom:7})}}},{key:"render",value:function(){return r.a.createElement("div",c({ref:"mapContainer"},_.omit(this.props,[Object.keys(t.propTypes)])),this.renderChildren())}}]),t}();t.a=h,h.propTypes={center:o.a.object,zoom:o.a.number,onBoundsChange:o.a.func,onLoad:o.a.func},h.defaultProps={center:{lat:40.354388,lng:-95.998237},zoom:4,onBoundsChange:function(e){},onLoad:function(){}}},iwoP:function(e,t,n){"use strict";var a=n("GiK3"),r=n.n(a),i=n("KSGD"),o=n.n(i),s=n("saAw"),l=n("OE/d"),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={reason:0,comments:"",errors:{reason:[],comments:[]},flagged:!1,flag_id:0,loading:!1},n.reasons=["This tree is the wrong species","This tree is on my private land and I would like it removed","This submission is spam","This submission is inappropriate","Other"],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),c(t,[{key:"componentWillMount",value:function(){this.setState({flagged:this.props.flagged,flag_id:this.props.flagId})}},{key:"componentWillReceiveProps",value:function(e){e.flagged!==this.state.flagged&&this.setState({flagged:e.flagged})}},{key:"undo",value:function(e){var t=this;e.preventDefault(),this.setState({loading:!0}),axios.delete("/web/flag/"+this.state.flag_id).then(function(e){t.setState({loading:!1}),t.props.onUndo(e.data.data)}).catch(function(e){t.setState({loading:!1}),console.log(e)})}},{key:"submit",value:function(e){var t=this;e.preventDefault(),this.validate()&&(this.setState({loading:!0}),axios.post("/web/flag",{observation_id:this.props.observationId,reason:this.state.reason,comments:this.state.comments}).then(function(e){var n=e.data.data;t.setState({loading:!1,reason:0,comments:"",errors:{reason:[],comments:[]},flag_id:n.id}),t.props.onSubmit(n)}).catch(function(e){t.setState({loading:!1});var n=e.response;if(n&&422===n.status){var a=n.data;t.setState({errors:{reason:a.reason||[],comments:a.comments||[]}})}else console.log(e)}))}},{key:"validate",value:function(){var e={reason:[],comments:[]},t=!1;return 0===this.state.reason&&(e.reason=["The reason field is required."],t=!0),"Other"===this.state.reason&&""===this.state.comments.trim()&&(e.comments=["Please specify the other reason."],t=!0),this.setState({errors:e}),!t}},{key:"renderFlagForm",value:function(){var e=this;return r.a.createElement("form",{action:"#",method:"POST",onSubmit:this.submit.bind(this)},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Reason"),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"select"+(this.state.errors.reason.length>0?" is-danger":"")},r.a.createElement("select",{value:this.state.reason,onChange:function(t){var n=t.target;return e.setState({reason:n.value})}},r.a.createElement("option",{value:"0",disabled:!0},"[Reason]"),this.reasons.map(function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))),this.state.errors.reason.map(function(e,t){return r.a.createElement("p",{className:"help is-danger",key:t},e)}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Additional Comments"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"card-textarea-sm textarea"+(this.state.errors.comments.length>0?" is-danger":""),value:this.state.comments,onChange:function(t){var n=t.target;return e.setState({comments:n.value})}}),this.state.errors.comments.map(function(e,t){return r.a.createElement("p",{className:"help is-danger",key:t},e)}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-primary"},"Flag Observation"))))}},{key:"renderUndoForm",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"notification is-success"},"Observation has been flagged and administrators will be notified shortly."),r.a.createElement("button",{className:"button",onClick:this.undo.bind(this)},"Undo"))}},{key:"render",value:function(){return l.a.authenticated()?r.a.createElement("div",null,this.state.flagged?this.renderUndoForm():this.renderFlagForm(),r.a.createElement(s.a,{visible:this.state.loading})):r.a.createElement("div",{className:"content"},r.a.createElement("p",null,"You must be logged in to flag this observation."),r.a.createElement("p",null,"Please ",r.a.createElement("a",{href:"/login"},"login")," or ",r.a.createElement("a",{href:"/register"},"create an account")," first."))}}]),t}();t.a=u,u.propTypes={observationId:o.a.number.isRequired,onSubmit:o.a.func,flagged:o.a.bool,onUndo:o.a.func,flagId:o.a.number},u.defaultProps={flagged:0,flagId:0,onSubmit:function(){},onUndo:function(){}}},jVml:function(e,t,n){"use strict";var a=window.TreeSnap.metaLabels;t.a=a},mOuh:function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"isJson",value:function(e){try{JSON.parse(e)}catch(e){return!1}return!0}},{key:"unit",value:function(e){return{feet:"US"===window.TreeSnap.units?"Feet":"Meters",inches:"US"===window.TreeSnap.units?"Inches":"cm"}[e.toLowerCase()]||null}},{key:"flattenObject",value:function(e){var t=this;return Object.keys(e).map(function(n){return Array.isArray(e[n])?_.flattenDeep(e[n]):"object"===a(e[n])?t.flattenObject(e[n]):e[n]})}}]),e}();t.a=i},qngo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),a.hasSupport=e}}};a.update(),t.default=a},saAw:function(e,t,n){"use strict";var a=n("GiK3"),r=n.n(a),i=n("KSGD"),o=n.n(i),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),s(t,[{key:"render",value:function(){return this.props.visible?this.props.inline?r.a.createElement("div",{className:"mt-1",style:this.props.containerStyle},r.a.createElement("i",{className:"fa fa-refresh fa-spin fa-2x"})):r.a.createElement("div",{className:"spinner-overlay",style:this.props.containerStyle},r.a.createElement("div",{className:"overlay-blur"}),r.a.createElement("span",{className:"spinner-container"},r.a.createElement("i",{className:"is-loading"}))):null}}]),t}();t.a=l,l.propTypes={visible:o.a.bool.isRequired,containerStyle:o.a.object,inline:o.a.bool},l.defaultProps={containerStyle:{},inline:!1}},t4LX:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"emit",value:function(e){var t=void 0;document.createEvent?(t=new Event(e),document.dispatchEvent(t)):(t=document.createEventObject(),document.fireEvent("on"+e,t))}},{key:"listen",value:function(e,t){document.addEventListener(e,t)}},{key:"remove",value:function(e,t){document.removeEventListener(e,t)}}]),e}();t.a=new r},y1vT:function(e,t,n){(function(t){var n="Expected a function",a=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,h="object"==typeof self&&self&&self.Object===Object&&self,f=u||h||Function("return this")(),p=Object.prototype.toString,d=Math.max,m=Math.min,v=function(){return f.Date.now()};function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==r}(e))return a;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):o.test(e)?a:+e}e.exports=function(e,t,a){var r,i,o,s,l,c,u=0,h=!1,f=!1,p=!0;if("function"!=typeof e)throw new TypeError(n);function y(t){var n=r,a=i;return r=i=void 0,u=t,s=e.apply(a,n)}function w(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-u>=o}function _(){var e=v();if(w(e))return E(e);l=setTimeout(_,function(e){var n=t-(e-c);return f?m(n,o-(e-u)):n}(e))}function E(e){return l=void 0,p&&r?y(e):(r=i=void 0,s)}function k(){var e=v(),n=w(e);if(r=arguments,i=this,c=e,n){if(void 0===l)return function(e){return u=e,l=setTimeout(_,t),h?y(e):s}(c);if(f)return l=setTimeout(_,t),y(c)}return void 0===l&&(l=setTimeout(_,t)),s}return t=g(t)||0,b(a)&&(h=!!a.leading,o=(f="maxWait"in a)?d(g(a.maxWait)||0,t):o,p="trailing"in a?!!a.trailing:p),k.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=c=i=l=void 0},k.flush=function(){return void 0===l?s:E(v())},k}}).call(t,n("DuR2"))},"z+gd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,a){return e[0]===t&&(n=a,!0)}),n}return function(){function t(){this.__entries__=[]}var n={size:{configurable:!0}};return n.size.get=function(){return this.__entries__.length},t.prototype.get=function(t){var n=e(this.__entries__,t),a=this.__entries__[n];return a&&a[1]},t.prototype.set=function(t,n){var a=e(this.__entries__,t);~a?this.__entries__[a][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,a=e(n,t);~a&&n.splice(a,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,a=this.__entries__;n<a.length;n+=1){var r=a[n];e.call(t,r[1],r[0])}},Object.defineProperties(t.prototype,n),t}()}(),a="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,r=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},o=2,s=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,c=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,a=!1,r=0;function s(){n&&(n=!1,e()),a&&c()}function l(){i(s)}function c(){var e=Date.now();if(n){if(e-r<o)return;a=!0}else n=!0,a=!1,setTimeout(l,t);r=e}return c}(this.refresh.bind(this),20)};c.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},c.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},c.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},c.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},c.prototype.connect_=function(){a&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},c.prototype.disconnect_=function(){a&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},c.prototype.onTransitionEnd_=function(e){var t=e.propertyName;void 0===t&&(t=""),s.some(function(e){return!!~t.indexOf(e)})&&this.refresh()},c.getInstance=function(){return this.instance_||(this.instance_=new c),this.instance_},c.instance_=null;var u=function(e,t){for(var n=0,a=Object.keys(t);n<a.length;n+=1){var r=a[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},h=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||r},f=g(0,0,0,0);function p(e){return parseFloat(e)||0}function d(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return t.reduce(function(t,n){return t+p(e["border-"+n+"-width"])},0)}function m(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var a=h(e).getComputedStyle(e),r=function(e){for(var t={},n=0,a=["top","right","bottom","left"];n<a.length;n+=1){var r=a[n],i=e["padding-"+r];t[r]=p(i)}return t}(a),i=r.left+r.right,o=r.top+r.bottom,s=p(a.width),l=p(a.height);if("border-box"===a.boxSizing&&(Math.round(s+i)!==t&&(s-=d(a,"left","right")+i),Math.round(l+o)!==n&&(l-=d(a,"top","bottom")+o)),!function(e){return e===h(e).document.documentElement}(e)){var c=Math.round(s+i)-t,u=Math.round(l+o)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return g(r.left,r.top,s,l)}var v="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof h(e).SVGGraphicsElement}:function(e){return e instanceof h(e).SVGElement&&"function"==typeof e.getBBox};function b(e){return a?v(e)?function(e){var t=e.getBBox();return g(0,0,t.width,t.height)}(e):m(e):f}function g(e,t,n,a){return{x:e,y:t,width:n,height:a}}var y=function(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=e};y.prototype.isActive=function(){var e=b(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},y.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var w=function(e,t){var n,a,r,i,o,s,l,c=(a=(n=t).x,r=n.y,i=n.width,o=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),u(l,{x:a,y:r,width:i,height:o,top:r,right:a+i,bottom:o+r,left:a}),l);u(this,{target:e,contentRect:c})},_=function(e,t,a){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=a};_.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},_.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},_.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},_.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},_.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new w(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},_.prototype.clearActive=function(){this.activeObservations_.splice(0)},_.prototype.hasActive=function(){return this.activeObservations_.length>0};var E="undefined"!=typeof WeakMap?new WeakMap:new n,k=function(e){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=c.getInstance(),n=new _(e,t,this);E.set(this,n)};["observe","unobserve","disconnect"].forEach(function(e){k.prototype[e]=function(){return(t=E.get(this))[e].apply(t,arguments);var t}});var S=void 0!==r.ResizeObserver?r.ResizeObserver:k;t.default=S}.call(t,n("DuR2"))}});