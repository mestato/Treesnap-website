webpackJsonp([22],{saAw:function(e,t,a){"use strict";var n=a("U7vG"),r=a.n(n),i=a("KSGD"),l=a.n(i),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={visible:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),o(t,[{key:"componentDidMount",value:function(){this.setState({visible:this.props.visible})}},{key:"componentWillReceiveProps",value:function(e){e.visible!==this.state.visible&&this.setState({visible:e.visible})}},{key:"render",value:function(){return this.state.visible?this.props.inline?r.a.createElement("div",{className:"mt-1",style:this.props.containerStyle},r.a.createElement("i",{className:"fa fa-refresh fa-spin fa-2x"})):r.a.createElement("div",{className:"spinner-overlay",style:this.props.containerStyle},r.a.createElement("div",{className:"overlay-blur"}),r.a.createElement("span",{className:"spinner-container"},r.a.createElement("i",{className:"is-loading"}))):null}}]),t}();t.a=s,s.PropTypes={visible:l.a.bool.isRequired,containerStyle:l.a.object,inline:l.a.bool},s.defaultProps={containerStyle:{},inline:!1}},u3oz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("U7vG"),r=a.n(n),i=a("F8kA"),l=a("saAw"),o=a("IFrJ"),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={loading:!0,events:[],page:1,next_page:null,prev_page:null,per_page:6,has_more_pages:!1,total:0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),s(t,[{key:"componentDidMount",value:function(){var e=this.state,t=o.a.parseUrl(this.props.location.search);t.page&&(e.page=parseInt(t.page),isNaN(e.page)&&(e.page=1)),t.per_page&&(e.per_page=parseInt(t.per_page),isNaN(e.per_page)&&(e.per_page=6)),this.setState(e),this.loadEvents(e)}},{key:"loadEvents",value:function(e){var t=this;axios.get("/admin/web/events",{params:{page:e.page,per_page:e.per_page}}).then(function(e){e=e.data.data,t.setState({loading:!1,events:e.data,next_page:e.next_page_url?e.current_page+1:null,prev_page:e.prev_page_url?e.current_page-1:null,total:e.total,page:e.current_page})}).catch(function(e){e.response&&alert(e.response),console.log(e)})}},{key:"goTo",value:function(e){var t=this.state;this.setState({page:e,loading:!0}),t.page=e,this.props.history.push("/events?page="+e),void 0!==window.scrollTo&&window.scrollTo(0,0),this.loadEvents(t)}},{key:"renderEvent",value:function(e,t){var a=e.formatted_start_date,n=e.formatted_end_date;return r.a.createElement("div",{key:t,className:"column is-4"},r.a.createElement("div",{className:"card card-equal-height"},r.a.createElement("header",{className:"card-header"},r.a.createElement("h3",{className:"card-header-title"},r.a.createElement(i.b,{to:"event/"+e.id,title:e.title},e.title))),r.a.createElement("section",{className:"card-content content mb-none"},r.a.createElement("strong",null,"Description"),r.a.createElement("p",null,e.description),r.a.createElement("strong",null,"Location"),r.a.createElement("div",{className:"mb-1"},e.location.split("\n").map(function(e,t){return r.a.createElement("div",{key:t},e)})),r.a.createElement("strong",null,"Dates"),r.a.createElement("div",null,"Starts ",a.month,", ",a.day," ",a.year," ",a.time,n?r.a.createElement("br",null):null,n?r.a.createElement("span",null,"Ends ",n.month,", ",n.day," ",n.year," ",n.time):null)),r.a.createElement("footer",{className:"card-footer"},r.a.createElement("a",{href:"#",className:"card-footer-item"},r.a.createElement("i",{className:"fa fa-edit mr-0"}),"Edit"),r.a.createElement("a",{href:"#",className:"card-footer-item text-danger"},r.a.createElement("i",{className:"fa fa-trash mr-0"}),"Delete"))))}},{key:"renderEvents",value:function(){return this.state.events.length>0?r.a.createElement("div",{className:"columns is-multiline"},this.state.events.map(this.renderEvent.bind(this))):this.state.loading?null:r.a.createElement("div",{className:"box"},r.a.createElement("p",null,"There are no events added at this time. Please use the button above to create a new event."))}},{key:"goBack",value:function(){null!==this.state.prev_page&&this.goTo(this.state.prev_page)}},{key:"goForward",value:function(){null!==this.state.next_page&&this.goTo(this.state.next_page)}},{key:"getPages",value:function(){for(var e=Math.ceil(this.state.total/this.state.per_page),t=[],a=1;a<=e;++a)t.push(a);return t}},{key:"renderPaginator",value:function(){var e=this;if(this.state.per_page>this.state.total)return null;var t=this.getPages();return r.a.createElement("nav",{className:"pagination is-centered",role:"navigation","aria-label":"pagination"},r.a.createElement("button",{type:"button",className:"pagination-previous",onClick:function(){return e.goBack()},disabled:null===this.state.prev_page},"Previous"),r.a.createElement("button",{type:"button",className:"pagination-next",onClick:function(){return e.goForward()},disabled:null===this.state.next_page},"Next page"),r.a.createElement("ul",{className:"pagination-list"},t.map(function(t,a){return r.a.createElement("li",{key:a},r.a.createElement("button",{type:"button",className:"pagination-link"+(e.state.page===t?" is-current":""),"aria-label":"Go to page "+t,title:"Go to page "+t,onClick:function(){e.goTo(t)}},t))})))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"is-flex"},r.a.createElement("h1",{className:"title is-3"},"Events"),r.a.createElement("div",{className:"ml-auto"},r.a.createElement("button",{className:"button is-primary",type:"button"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fa fa-plus"})),r.a.createElement("span",null,"Create Event")))),this.renderEvents(),this.renderPaginator(),r.a.createElement(l.a,{visible:this.state.loading}))}}]),t}();t.default=c}});